---
import { dayjs } from "~/lib/date";

interface Props {
	startAt: Date;
	endAt: Date;
	label: string;
}

const { startAt, endAt, label } = Astro.props;

const from = dayjs(startAt).tz();
const to = dayjs(endAt).tz();
const durationDays = to.diff(from, "days");
const durationHours = Math.round(to.diff(from, "hours", true));
---

<div class="inline-flex items-center gap-x-2">
	{
		label.endsWith("?") ? (
			<div
				class="tooltip tooltip-right"
				data-tip="Predicted date, might be inaccurate"
			>
				<span class="font-medium uppercase underline decoration-dotted">
					{label}
				</span>
			</div>
		) : (
			<span class="font-medium uppercase">{label}</span>
		)
	}

	<span class="badge dark:badge-primary dark:badge-soft inline-flex">
		<div
			class="tooltip underline decoration-dotted"
			data-tip={`${from.format("YYYY-MM-DD HH:mm")} / ${from.fromNow()}`}
		>
			{from.format("YYYY-MM-DD")}
		</div>

		&mdash;

		<div
			class="tooltip underline decoration-dotted"
			data-tip={`${to.format("YYYY-MM-DD HH:mm")} / ${to.fromNow()}`}
		>
			{to.format("YYYY-MM-DD")}
		</div>
	</span>

	<div class="tooltip" data-tip={`${durationHours} hours`}>
		<span class="font-medium uppercase underline decoration-dotted">
			{durationDays}D
		</span>
	</div>
</div>
